EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:switches
LIBS:esp32
LIBS:switcher-toppower
LIBS:ch340
LIBS:zeropin
LIBS:stepup_modules
LIBS:regulators2
LIBS:ws2812
LIBS:mcp73831
LIBS:switcher-suosemi
LIBS:esp32_button-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 6
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 "(c) 2017 Google"
Comment3 "CC-BY 4.0 International"
Comment4 ""
$EndDescr
$Comp
L USB_OTG J401
U 1 1 59E66EE5
P 2500 3500
F 0 "J401" H 2300 3950 50  0000 L CNN
F 1 "USB_OTG" H 2300 3850 50  0000 L CNN
F 2 "Connectors:USB_Micro-B_10103594-0001LF" H 2650 3450 50  0001 C CNN
F 3 "" H 2650 3450 50  0001 C CNN
	1    2500 3500
	1    0    0    -1  
$EndComp
$Comp
L CH340G U401
U 1 1 59E67671
P 4500 3500
F 0 "U401" H 4150 4050 60  0000 C CNN
F 1 "CH340C" H 4500 3500 60  0000 C CNN
F 2 "Housings_SOIC:SOIC-16_3.9x9.9mm_Pitch1.27mm" H 4500 3400 60  0001 C CNN
F 3 "" H 4500 3400 60  0001 C CNN
	1    4500 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 3500 3800 3500
Wire Wire Line
	3800 3600 2800 3600
NoConn ~ 2800 3700
Wire Wire Line
	2500 3900 2500 4400
$Comp
L GND #PWR09
U 1 1 59E67781
P 2500 4400
F 0 "#PWR09" H 2500 4150 50  0001 C CNN
F 1 "GND" H 2500 4250 50  0000 C CNN
F 2 "" H 2500 4400 50  0001 C CNN
F 3 "" H 2500 4400 50  0001 C CNN
	1    2500 4400
	1    0    0    -1  
$EndComp
Text HLabel 2950 3300 2    60   Output ~ 0
USB5V
Wire Wire Line
	4500 2450 4500 2900
Text HLabel 3700 3200 0    60   Input ~ 0
TXD
Text HLabel 3700 3300 0    60   Input ~ 0
RXD
Wire Wire Line
	3700 3300 3800 3300
Wire Wire Line
	3800 3200 3700 3200
NoConn ~ 5200 3200
NoConn ~ 5200 3600
NoConn ~ 5200 3500
NoConn ~ 5200 3700
NoConn ~ 5200 3800
$Comp
L Q_DUAL_NPN_NPN_E1B1C2E2B2C1 Q401
U 1 1 59E68974
P 8300 3150
F 0 "Q401" H 8500 3200 50  0000 L CNN
F 1 "UMH3N" H 8500 3100 50  0000 L CNN
F 2 "TO_SOT_Packages_SMD:SOT-363_SC-70-6_Handsoldering" H 8500 3250 50  0001 C CNN
F 3 "" H 8300 3150 50  0001 C CNN
	1    8300 3150
	0    -1   -1   0   
$EndComp
$Comp
L Q_DUAL_NPN_NPN_E1B1C2E2B2C1 Q401
U 2 1 59E689C3
P 8300 3950
F 0 "Q401" H 8500 4000 50  0000 L CNN
F 1 "UMH3N" H 8500 3900 50  0000 L CNN
F 2 "TO_SOT_Packages_SMD:SOT-363_SC-70-6_Handsoldering" H 8500 4050 50  0001 C CNN
F 3 "" H 8300 3950 50  0001 C CNN
	2    8300 3950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	5200 3300 5500 3300
Wire Wire Line
	5200 3400 5500 3400
Wire Wire Line
	8500 3050 8850 3050
Wire Wire Line
	8100 3050 7800 3050
Wire Wire Line
	8300 3350 8300 3400
Wire Wire Line
	7800 3400 8600 3400
Text HLabel 7800 3050 0    60   Output ~ 0
CHIP_PD
Text HLabel 7950 3850 0    60   Output ~ 0
IO0
Wire Wire Line
	8100 3850 7950 3850
Text Label 5350 3400 0    60   ~ 0
~DTR
Text Label 5350 3300 0    60   ~ 0
~RTS
Text Label 7800 3400 0    60   ~ 0
~DTR
Wire Wire Line
	8600 3400 8600 3850
Wire Wire Line
	8600 3850 8500 3850
Connection ~ 8300 3400
Wire Wire Line
	8300 4150 8300 4300
Text Label 8550 4300 0    60   ~ 0
~RTS
Wire Wire Line
	8300 4300 8850 4300
Wire Wire Line
	8850 4300 8850 3050
Text HLabel 3250 2450 0    60   Input ~ 0
REGULATED_3V3
Wire Wire Line
	3400 2450 3400 3400
Wire Wire Line
	3400 3400 3800 3400
Wire Notes Line
	7050 2450 9400 2450
Wire Notes Line
	9400 2450 9400 4650
Wire Notes Line
	9400 4650 7050 4650
Wire Notes Line
	7050 4650 7050 2450
Text Notes 7450 4600 0    60   ~ 0
Based on the NodeMCU reset circuit
$Comp
L GND #PWR010
U 1 1 59E6931B
P 4500 4200
F 0 "#PWR010" H 4500 3950 50  0001 C CNN
F 1 "GND" H 4500 4050 50  0000 C CNN
F 2 "" H 4500 4200 50  0001 C CNN
F 3 "" H 4500 4200 50  0001 C CNN
	1    4500 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4500 4200 4500 4100
NoConn ~ 3800 3700
NoConn ~ 3800 3800
$Comp
L C C302
U 1 1 59E86CCB
P 4700 2700
F 0 "C302" H 4725 2800 50  0000 L CNN
F 1 "0.1u" H 4725 2600 50  0000 L CNN
F 2 "Capacitors_SMD_Round:C_0603" H 4738 2550 50  0001 C CNN
F 3 "" H 4700 2700 50  0001 C CNN
	1    4700 2700
	1    0    0    -1  
$EndComp
$Comp
L C C303
U 1 1 59E86D2B
P 5000 2700
F 0 "C303" H 5025 2800 50  0000 L CNN
F 1 "10u" H 5025 2600 50  0000 L CNN
F 2 "Capacitors_SMD_Round:C_1206" H 5038 2550 50  0001 C CNN
F 3 "" H 5000 2700 50  0001 C CNN
	1    5000 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 2450 5000 2550
Wire Wire Line
	3250 2450 5000 2450
Connection ~ 4500 2450
Connection ~ 3400 2450
Wire Wire Line
	4700 2550 4700 2450
Connection ~ 4700 2450
$Comp
L GND #PWR011
U 1 1 59E86E40
P 4700 2850
F 0 "#PWR011" H 4700 2600 50  0001 C CNN
F 1 "GND" H 4700 2700 50  0000 C CNN
F 2 "" H 4700 2850 50  0001 C CNN
F 3 "" H 4700 2850 50  0001 C CNN
	1    4700 2850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR012
U 1 1 59E86E6C
P 5000 2850
F 0 "#PWR012" H 5000 2600 50  0001 C CNN
F 1 "GND" H 5000 2700 50  0000 C CNN
F 2 "" H 5000 2850 50  0001 C CNN
F 3 "" H 5000 2850 50  0001 C CNN
	1    5000 2850
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 3300 2950 3300
$Comp
L C C301
U 1 1 59E8706D
P 2050 4150
F 0 "C301" H 2075 4250 50  0000 L CNN
F 1 "4.7n" H 2075 4050 50  0000 L CNN
F 2 "Capacitors_SMD_Round:C_0603" H 2088 4000 50  0001 C CNN
F 3 "" H 2050 4150 50  0001 C CNN
	1    2050 4150
	1    0    0    -1  
$EndComp
$Comp
L R R301
U 1 1 59E870A6
P 2300 4150
F 0 "R301" V 2380 4150 50  0000 C CNN
F 1 "1M" V 2300 4150 50  0000 C CNN
F 2 "Resistors_SMD:R_0603_HandSoldering" V 2230 4150 50  0001 C CNN
F 3 "" H 2300 4150 50  0001 C CNN
	1    2300 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2050 4000 2050 3950
Wire Wire Line
	2050 3950 2400 3950
Wire Wire Line
	2400 3950 2400 3900
Wire Wire Line
	2300 4000 2300 3950
Connection ~ 2300 3950
$Comp
L GND #PWR013
U 1 1 59E871BB
P 2300 4400
F 0 "#PWR013" H 2300 4150 50  0001 C CNN
F 1 "GND" H 2300 4250 50  0000 C CNN
F 2 "" H 2300 4400 50  0001 C CNN
F 3 "" H 2300 4400 50  0001 C CNN
	1    2300 4400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 4300 2300 4400
Wire Wire Line
	2050 4300 2050 4350
Wire Wire Line
	2050 4350 2300 4350
Connection ~ 2300 4350
Text Notes 3350 4200 0    60   ~ 0
CH340C variant\ndoes not use\nexternal xtal.
Text Notes 3250 2350 0    60   ~ 0
TODO: Shut off CH340 when\nno USB5V.
Text Notes 1800 4850 0    60   ~ 0
TODO: Document which appnote\nhad this grounding advice.
$Comp
L PWR_FLAG #FLG014
U 1 1 59F03802
P 2850 3150
F 0 "#FLG014" H 2850 3225 50  0001 C CNN
F 1 "PWR_FLAG" H 2850 3300 50  0000 C CNN
F 2 "" H 2850 3150 50  0001 C CNN
F 3 "" H 2850 3150 50  0001 C CNN
	1    2850 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2850 3150 2850 3300
Connection ~ 2850 3300
$Comp
L PWR_FLAG #FLG015
U 1 1 59F04502
P 2850 4100
F 0 "#FLG015" H 2850 4175 50  0001 C CNN
F 1 "PWR_FLAG" H 2850 4250 50  0000 C CNN
F 2 "" H 2850 4100 50  0001 C CNN
F 3 "" H 2850 4100 50  0001 C CNN
	1    2850 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	2850 4100 2850 4150
Wire Wire Line
	2850 4150 2500 4150
Connection ~ 2500 4150
$EndSCHEMATC
